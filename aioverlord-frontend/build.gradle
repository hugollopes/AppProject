task buildImage(type: Exec) {
    commandLine "docker", "build", ".", "--tag", "localhost:5001/frontend:latest"
}

task pushImage(type: Exec, group: "Custom"){
  dependsOn 'buildImage'
  commandLine "docker", "push","localhost:5001/frontend:latest"
}

task populatehostnpm(type: Exec, group: "Custom"){
  dependsOn 'pushImage'
  def path = "${buildDir}/../."
  commandLine "docker", "run", "-v", path + ':/app', "localhost:5001/frontend:latest", "npm", "install"
}

task build() {
  //both dev and e2e
  dependsOn 'populatehostnpm'
  
}

task copyreferencedata(type: Exec, group: "Custom", description: "Distributes reference data"){
  commandLine "cp", "-r" , "../referenceData/.", "./src/assets"
}
task npminstall( type: Exec  ) {
    commandLine "npm", "install"
}

task lint( type: Exec  ) {
    dependsOn 'npminstall'
    dependsOn 'copyreferencedata'
    commandLine "npm", "run", "lint"
}

task webnpmbuild( type: Exec  ) {
    dependsOn 'copyreferencedata'
    dependsOn 'lint'
    commandLine "npm", "run", "build"
}

task buildprodweb() {
dependsOn 'copyreferencedata'
  dependsOn 'webnpmbuild'
}
